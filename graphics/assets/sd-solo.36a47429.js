import{f as t,o as e,r as n,c as a,b as s,d as o,e as r,F as i,j as l,u as c,n as u,k as d}from"./vendor.cd1d5b6d.js";import{_ as m,a as p,s as g}from"./index.08a07fee.js";import{_ as v,a as h,b as f,c as y,d as S}from"./Footer.1f43d5a6.js";const R={setup(n){const a=t();return e((()=>{const t=nodecg,e=nodecg;t.Replicant("runDataActiveRunSurrounding","nodecg-speedcontrol").on("change",(n=>{t.readReplicant("runDataArray","nodecg-speedcontrol",(t=>{const s=n.current,o=Math.max(t.findIndex((t=>t.id===s)),0);e.readReplicant("commentatorArray","speedcontrol-additions",(n=>{e.readReplicant("speedcontrolUserAdditionArray","speedcontrol-additions",(e=>{const s=t.slice(o,o+4).map((t=>{return{title:t.game||"",category:t.category||"",platform:t.system||"",startsAt:(a=new Date(t.scheduled),`${a.getFullYear()}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`),est:t.estimate||"",runners:t.teams.flatMap((t=>t.players.map((n=>{var a,s,o;const r=e.find((t=>t.id===n.customData.oengusId));return{id:t.id,name:n.name,accounts:{twitch:n.social.twitch,twitter:null==(a=null==r?void 0:r.social)?void 0:a.twitter,nico:null==(s=null==r?void 0:r.social)?void 0:s.nico,youtube:null==(o=null==r?void 0:r.social)?void 0:o.youtube}}})))),commentators:n.filter((e=>e.assignedRunIdArray.includes(t.externalID))).map((t=>({name:t.name,accounts:t.social})))};var a}));a.dispatch("setRuns",s),console.log(store.getters.headerInfo)}))}))}))}));const n={stopped:"suspend",running:"running",paused:"suspend",finished:"complete"};t.Replicant("timer","nodecg-speedcontrol").on("change",(t=>{a.dispatch("setTimer",{time:t.time||"00:00",status:n[t.state||"paused"],split:(Object.entries(t.teamFinishTimes)||[]).map((([t,e])=>({id:t,time:e.time})))})}));nodecg.Replicant("spotifyPlayingTrack","nodecg-spotify-widget").on("change",(t=>{a.dispatch("setMusic",{title:(null==t?void 0:t.name)||"",artist:(null==t?void 0:t.artists.join(","))||""})}));nodecg.Replicant("activeTweet","nodecg-twitter-widget").on("change",(t=>{a.dispatch("setTweet",t&&{id:t.screenName,icon:t.profileImageUrl,content:t.text})}));nodecg.Replicant("runner-scores").on("change",(t=>{a.dispatch("setScores",t.filter((t=>null!==t.score)))}))})),()=>{}}};const b={id:"sidebar"},w={id:"infos"};d({setup(d){const g=n("1228.8px"),A=n("921.6px"),T=t(),x=a((()=>T.getters.currentEst)),I=a((()=>T.getters.formattedTime)),j=a((()=>T.state.timer.status)),D=a((()=>T.state.runs.currentRunners)),$=a((()=>T.state.runs.currentCommentators));return e((()=>{setInterval((()=>{T.dispatch("rotateAccounts")}),1e4)})),(t,e)=>(s(),o(i,null,[r(R),r(m),r("header",null,[r(v)]),r("main",null,[r("div",b,[r(p,{small:""}),r("div",w,[(s(!0),o(i,null,l(c(D),(t=>(s(),o(h,{key:t.id,label:"Runner",value:t.name,account:t.currentAccount()},null,8,["value","account"])))),128)),(s(!0),o(i,null,l(c($),((t,e)=>(s(),o(h,{key:e,label:"Commentator",value:t.name,account:t.currentAccount()},null,8,["value","account"])))),128)),r(h,{time:"",label:"EST"},{default:u((()=>[r(S,{value:c(x)},null,8,["value"])])),_:1}),r(h,{time:"",label:"Current Time"},{default:u((()=>[r(S,{value:c(I),status:c(j)},null,8,["value","status"])])),_:1})])]),r(f,{style:{width:g.value,height:A.value}},null,8,["style"])]),r("footer",null,[r(y)])],64))}}).use(g).mount("#root");
