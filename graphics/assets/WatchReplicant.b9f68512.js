import{p as t,a as e,f as n,c as a,b as i,d as s,u as o,e as r,t as d,i as c,T as l,w as p,o as u}from"./vendor.cd1d5b6d.js";const m=p();t("data-v-212308bc");const g={key:0,id:"tweet"},f={class:"box"},h={id:"twitter-user"},v={id:"twitter-id"};e();const w={props:{width:{type:String,default:"420px"},small:{type:Boolean},from:{type:String,default:"left"}},setup(t){const e=t,p=n(),u=a((()=>p.getters.tweet)),w=a((()=>({"from-left":"left"===e.from,"from-right":"right"===e.from,"from-top":"top"===e.from})));return(e,n)=>(i(),s(l,{name:`slide-from-${t.from}`},{default:m((()=>[o(u)?(i(),s("div",{key:0,id:"tweet-wrapper",class:o(w)},[o(u)?(i(),s("div",g,[r("div",f,[r("div",h,[r("img",{id:"twitter-icon",src:o(u).icon,alt:"icon"},null,8,["src"]),r("span",v,"@"+d(o(u).id),1)]),r("div",{id:"tweet-text",class:{small:t.small}},d(o(u).content),3)])])):c("",!0)],2)):c("",!0)])),_:1},8,["name"]))},__scopeId:"data-v-212308bc"},y={setup(t){const e=n();return u((()=>{const t=nodecg,n=nodecg;t.Replicant("runDataActiveRunSurrounding","nodecg-speedcontrol").on("change",(a=>{t.readReplicant("runDataArray","nodecg-speedcontrol",(t=>{const i=a.current,s=Math.max(t.findIndex((t=>t.id===i)),0);n.readReplicant("commentatorArray","speedcontrol-additions",(a=>{n.readReplicant("speedcontrolUserAdditionArray","speedcontrol-additions",(n=>{const i=t.slice(s,s+4).map((t=>{return{title:t.game||"",category:t.category||"",platform:t.system||"",startsAt:(e=new Date(t.scheduled),`${e.getFullYear()}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`),est:t.estimate||"",runners:t.teams.flatMap((t=>t.players.map((e=>{var a,i,s;const o=n.find((t=>t.id===e.id));return{id:t.id,name:e.name,accounts:{twitch:e.social.twitch,twitter:null==(a=null==o?void 0:o.social)?void 0:a.twitter,nico:null==(i=null==o?void 0:o.social)?void 0:i.nico,youtube:null==(s=null==o?void 0:o.social)?void 0:s.youtube}}})))),commentators:a.filter((e=>e.assignedRunIdArray.includes(t.externalID))).map((t=>({name:t.name,accounts:t.social})))};var e}));e.dispatch("setRuns",i)}))}))}))}));const a={stopped:"suspend",running:"running",paused:"suspend",finished:"complete"};t.Replicant("timer","nodecg-speedcontrol").on("change",(t=>{e.dispatch("setTimer",{time:t.time||"00:00",status:a[t.state||"paused"],split:(Object.entries(t.teamFinishTimes)||[]).map((([t,e])=>({id:t,time:e.time})))})}));nodecg.Replicant("spotifyPlayingTrack","nodecg-spotify-widget").on("change",(t=>{e.dispatch("setMusic",{title:(null==t?void 0:t.name)||"",artist:(null==t?void 0:t.artists.join(","))||""})}));nodecg.Replicant("activeTweet","nodecg-twitter-widget").on("change",(t=>{e.dispatch("setTweet",t&&{id:t.screenName,icon:t.profileImageUrl,content:t.text})}));nodecg.Replicant("runner-scores").on("change",(t=>{e.dispatch("setScores",t.filter((t=>null!==t.score)))}))})),()=>{}}};export{y as _,w as a};
